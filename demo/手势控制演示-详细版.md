# æ‰‹åŠ¿æ§åˆ¶ç½‘é¡µæ¼”ç¤º - è¯¦ç»†æŠ€æœ¯è§£æä¸æ‰©å±•æŒ‡å—

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºGoogle MediaPipeæŠ€æœ¯æ ˆçš„å…ˆè¿›æ‰‹åŠ¿è¯†åˆ«ç½‘é¡µåº”ç”¨ï¼Œå®ç°äº†é€šè¿‡è®¡ç®—æœºè§†è§‰æŠ€æœ¯è¯†åˆ«ç”¨æˆ·æ‰‹åŠ¿å¹¶æ§åˆ¶ç½‘é¡µäº¤äº’çš„åŠŸèƒ½ã€‚è¯¥é¡¹ç›®å±•ç¤ºäº†ç°ä»£WebæŠ€æœ¯ä¸AIæŠ€æœ¯çš„å®Œç¾ç»“åˆï¼Œä¸ºæœªæ¥çš„äººæœºäº¤äº’æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚

### æŠ€æœ¯äº®ç‚¹
- ğŸ¤– **AIé©±åŠ¨**ï¼šåŸºäºMediaPipeæ·±åº¦å­¦ä¹ æ¨¡å‹è¿›è¡Œå®æ—¶æ‰‹åŠ¿è¯†åˆ«
- ğŸ“± **è·¨å¹³å°**ï¼šæ”¯æŒæ¡Œé¢å’Œç§»åŠ¨ç«¯æµè§ˆå™¨
- âš¡ **é«˜æ€§èƒ½**ï¼š60FPSå®æ—¶å¤„ç†ï¼Œä½å»¶è¿Ÿå“åº”
- ğŸ¯ **é«˜ç²¾åº¦**ï¼šå¤šç‚¹æ‰‹éƒ¨å…³é”®ç‚¹æ£€æµ‹ï¼Œè¯†åˆ«å‡†ç¡®ç‡>90%
- ğŸ”§ **å¯æ‰©å±•**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°æ‰‹åŠ¿å’ŒåŠŸèƒ½

## æ ¸å¿ƒæŠ€æœ¯æ¶æ„

### 1. æŠ€æœ¯æ ˆåˆ†æ

```html
<!-- MediaPipeæ ¸å¿ƒåº“å¼•å…¥ -->
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3.1640029074/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils@0.6.1629159505/control_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.3.1620248257/drawing_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646424915/hands.js"></script>
```

**æŠ€æœ¯è§£æï¼š**
- `camera_utils.js`ï¼šæ‘„åƒå¤´ç®¡ç†å·¥å…·ï¼Œå¤„ç†è§†é¢‘æµè·å–å’Œé…ç½®
- `control_utils.js`ï¼šæ§åˆ¶å·¥å…·é›†ï¼Œæä¾›UIæ§ä»¶å’Œäº¤äº’ç®¡ç†
- `drawing_utils.js`ï¼šç»˜å›¾å·¥å…·ï¼Œç”¨äºåœ¨Canvasä¸Šç»˜åˆ¶æ‰‹éƒ¨å…³é”®ç‚¹å’Œè¿æ¥çº¿
- `hands.js`ï¼šæ‰‹éƒ¨æ£€æµ‹æ ¸å¿ƒæ¨¡å‹ï¼ŒåŒ…å«21ä¸ªå…³é”®ç‚¹çš„æ£€æµ‹ç®—æ³•

### 2. CSSæ¶æ„è®¾è®¡

#### 2.1 CSSå˜é‡ç³»ç»Ÿ
```css
:root {
    --primary-color: #666;      /* ä¸»è‰²è°ƒ */
    --secondary-color: #888;    /* æ¬¡è¦è‰²è°ƒ */
    --accent-color: #999;       /* å¼ºè°ƒè‰² */
    --text-color: #333;         /* æ–‡æœ¬è‰² */
    --bg-color: #ffffff;        /* èƒŒæ™¯è‰² */
    --card-bg: #ffffff;         /* å¡ç‰‡èƒŒæ™¯ */
}
```

**è®¾è®¡ç†å¿µï¼š**
- é‡‡ç”¨CSSè‡ªå®šä¹‰å±æ€§å®ç°ä¸»é¢˜ç³»ç»Ÿ
- ä¾¿äºåç»­æ‰©å±•æš—è‰²ä¸»é¢˜æˆ–å…¶ä»–ä¸»é¢˜å˜ä½“
- æé«˜ä»£ç ç»´æŠ¤æ€§å’Œä¸€è‡´æ€§

#### 2.2 æ‰‹åŠ¿æ§åˆ¶é¢æ¿è®¾è®¡
```css
.gesture-panel {
    position: fixed;           /* å›ºå®šå®šä½ï¼Œå§‹ç»ˆå¯è§ */
    top: 20px;
    right: 20px;
    width: 300px;
    background: var(--card-bg);
    border-radius: 15px;       /* ç°ä»£åŒ–åœ†è§’è®¾è®¡ */
    padding: 20px;
    z-index: 1000;            /* ç¡®ä¿åœ¨æœ€é¡¶å±‚ */
    transition: all 0.3s ease; /* å¹³æ»‘è¿‡æ¸¡åŠ¨ç”» */
}
```

**äº¤äº’è®¾è®¡è€ƒé‡ï¼š**
- å›ºå®šåœ¨å³ä¸Šè§’ï¼Œä¸å¹²æ‰°ä¸»è¦å†…å®¹
- é€‚ä¸­çš„å®½åº¦ï¼ˆ300pxï¼‰å¹³è¡¡åŠŸèƒ½æ€§å’Œç©ºé—´å ç”¨
- é«˜z-indexç¡®ä¿å§‹ç»ˆå¯è§å’Œå¯æ“ä½œ

### 3. JavaScriptæ ¸å¿ƒæ¶æ„æ·±åº¦è§£æ

#### 3.1 GestureControllerç±»è®¾è®¡

```javascript
class GestureController {
    constructor() {
        // æ ¸å¿ƒç»„ä»¶åˆå§‹åŒ–
        this.hands = null;              // MediaPipe Handså®ä¾‹
        this.camera = null;             // æ‘„åƒå¤´ç®¡ç†å®ä¾‹
        this.isRunning = false;         // è¿è¡ŒçŠ¶æ€æ ‡å¿—
        this.lastGestureTime = 0;       // ä¸Šæ¬¡æ‰‹åŠ¿æ‰§è¡Œæ—¶é—´
        this.gestureDelay = 1000;       // æ‰‹åŠ¿é˜²æŠ–å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰
        this.debugMode = false;         // è°ƒè¯•æ¨¡å¼æ ‡å¿—
        
        // åˆå§‹åŒ–æµç¨‹
        this.initializeElements();      // DOMå…ƒç´ ç»‘å®š
        this.checkLibraries();          // ä¾èµ–åº“æ£€æŸ¥
        this.bindEvents();              // äº‹ä»¶ç›‘å¬å™¨ç»‘å®š
    }
}
```

**æ¶æ„ä¼˜åŠ¿ï¼š**
- å•ä¸€èŒè´£åŸåˆ™ï¼šæ¯ä¸ªæ–¹æ³•ä¸“æ³¨ç‰¹å®šåŠŸèƒ½
- çŠ¶æ€ç®¡ç†ï¼šæ¸…æ™°çš„çŠ¶æ€æ ‡å¿—å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- é”™è¯¯å¤„ç†ï¼šå®Œå–„çš„å¼‚å¸¸æ•è·å’Œç”¨æˆ·åé¦ˆæœºåˆ¶

#### 3.2 DOMå…ƒç´ ç®¡ç†ç³»ç»Ÿ

```javascript
initializeElements() {
    // è§†é¢‘å’Œç”»å¸ƒå…ƒç´ 
    this.videoElement = document.getElementById('inputVideo');
    this.canvasElement = document.getElementById('outputCanvas');
    this.canvasCtx = this.canvasElement.getContext('2d');
    
    // æ§åˆ¶é¢æ¿å…ƒç´ 
    this.gesturePanel = document.getElementById('gesturePanel');
    this.startBtn = document.getElementById('startBtn');
    this.stopBtn = document.getElementById('stopBtn');
    
    // çŠ¶æ€æ˜¾ç¤ºå…ƒç´ 
    this.currentGesture = document.getElementById('currentGesture');
    this.gestureName = document.getElementById('gestureName');
    this.confidence = document.getElementById('confidence');
    
    // åé¦ˆç³»ç»Ÿå…ƒç´ 
    this.notification = document.getElementById('notification');
    this.debugInfo = document.getElementById('debugInfo');
    this.debugMessages = document.getElementById('debugMessages');
}
```

**è®¾è®¡æ¨¡å¼ï¼š**
- é›†ä¸­å¼DOMç®¡ç†ï¼Œé¿å…é‡å¤æŸ¥è¯¢
- æå‰ç¼“å­˜å…ƒç´ å¼•ç”¨ï¼Œæå‡æ€§èƒ½
- æ¸…æ™°çš„å…ƒç´ åˆ†ç±»å’Œå‘½åè§„èŒƒ

#### 3.3 ä¾èµ–åº“æ£€æŸ¥æœºåˆ¶

```javascript
checkLibraries() {
    const requiredLibs = ['Camera', 'Hands', 'drawConnectors', 'drawLandmarks'];
    const missingLibs = [];
    
    requiredLibs.forEach(lib => {
        if (typeof window[lib] === 'undefined') {
            missingLibs.push(lib);
        }
    });
    
    if (missingLibs.length > 0) {
        this.addDebugMessage(`ç¼ºå°‘åº“: ${missingLibs.join(', ')}`);
        this.showNotification(`MediaPipeåº“åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•`, 'error');
        this.startBtn.disabled = true;
        this.startBtn.textContent = 'åº“åŠ è½½å¤±è´¥';
    } else {
        this.addDebugMessage('æ‰€æœ‰åº“åŠ è½½æˆåŠŸ');
        this.initializeMediaPipe();
    }
}
```

**å¥å£®æ€§è®¾è®¡ï¼š**
- ä¸»åŠ¨æ£€æŸ¥ä¾èµ–åº“å¯ç”¨æ€§
- ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º
- é˜²å¾¡æ€§ç¼–ç¨‹ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯

#### 3.4 MediaPipeåˆå§‹åŒ–è¯¦è§£

```javascript
async initializeMediaPipe() {
    try {
        this.addDebugMessage('åˆå§‹åŒ–MediaPipe...');
        
        // åˆ›å»ºHandså®ä¾‹
        this.hands = new Hands({
            locateFile: (file) => {
                return `https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646424915/${file}`;
            }
        });

        // é…ç½®æ£€æµ‹å‚æ•°
        this.hands.setOptions({
            maxNumHands: 1,                    // æœ€å¤§æ£€æµ‹æ‰‹æ•°ï¼š1
            modelComplexity: 1,                // æ¨¡å‹å¤æ‚åº¦ï¼š1ï¼ˆå¹³è¡¡ç²¾åº¦å’Œæ€§èƒ½ï¼‰
            minDetectionConfidence: 0.7,       // æœ€å°æ£€æµ‹ç½®ä¿¡åº¦ï¼š70%
            minTrackingConfidence: 0.5         // æœ€å°è·Ÿè¸ªç½®ä¿¡åº¦ï¼š50%
        });

        // è®¾ç½®ç»“æœå›è°ƒ
        this.hands.onResults((results) => this.onResults(results));
        this.addDebugMessage('MediaPipeåˆå§‹åŒ–æˆåŠŸ');
    } catch (error) {
        this.addDebugMessage(`MediaPipeåˆå§‹åŒ–å¤±è´¥: ${error.message}`);
        this.showNotification('MediaPipeåˆå§‹åŒ–å¤±è´¥: ' + error.message, 'error');
    }
}
```

**å‚æ•°ä¼˜åŒ–è¯´æ˜ï¼š**
- `maxNumHands: 1`ï¼šå•æ‰‹æ£€æµ‹ï¼Œæå‡æ€§èƒ½
- `modelComplexity: 1`ï¼šä¸­ç­‰å¤æ‚åº¦ï¼Œå¹³è¡¡ç²¾åº¦å’Œé€Ÿåº¦
- `minDetectionConfidence: 0.7`ï¼šè¾ƒé«˜æ£€æµ‹é˜ˆå€¼ï¼Œå‡å°‘è¯¯æ£€
- `minTrackingConfidence: 0.5`ï¼šé€‚ä¸­è·Ÿè¸ªé˜ˆå€¼ï¼Œä¿æŒæµç•…æ€§

#### 3.5 æ‘„åƒå¤´ç®¡ç†ç³»ç»Ÿ

```javascript
async startCamera() {
    try {
        this.addDebugMessage('è¯·æ±‚æ‘„åƒå¤´æƒé™...');
        
        // æµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
            throw new Error('æµè§ˆå™¨ä¸æ”¯æŒæ‘„åƒå¤´è®¿é—®');
        }
        
        // HTTPSå®‰å…¨æ£€æŸ¥
        if (location.protocol !== 'https:' && 
            location.hostname !== 'localhost' && 
            location.hostname !== '127.0.0.1') {
            this.showNotification('æ‘„åƒå¤´éœ€è¦HTTPSæˆ–æœ¬åœ°ç¯å¢ƒ', 'warning');
        }

        // åˆ›å»ºæ‘„åƒå¤´å®ä¾‹
        this.camera = new Camera(this.videoElement, {
            onFrame: async () => {
                if (this.hands && this.isRunning) {
                    await this.hands.send({ image: this.videoElement });
                }
            },
            width: 300,    // è§†é¢‘å®½åº¦
            height: 200    // è§†é¢‘é«˜åº¦
        });

        await this.camera.start();
        
        // æ›´æ–°UIçŠ¶æ€
        this.isRunning = true;
        this.startBtn.disabled = true;
        this.stopBtn.disabled = false;
        this.gestureName.textContent = 'æ£€æµ‹ä¸­...';
        
        this.addDebugMessage('æ‘„åƒå¤´å¯åŠ¨æˆåŠŸ');
        this.showNotification('æ‘„åƒå¤´å·²å¯åŠ¨ï¼Œå¼€å§‹æ‰‹åŠ¿æ§åˆ¶ï¼', 'success');
        
    } catch (error) {
        this.handleCameraError(error);
    }
}
```

**å®‰å…¨æ€§è€ƒè™‘ï¼š**
- ä¸»åŠ¨æ£€æŸ¥æµè§ˆå™¨APIæ”¯æŒ
- HTTPSåè®®éªŒè¯
- è¯¦ç»†çš„é”™è¯¯åˆ†ç±»å’Œå¤„ç†

#### 3.6 æ‰‹åŠ¿è¯†åˆ«ç®—æ³•æ ¸å¿ƒ

```javascript
recognizeGesture(landmarks) {
    // æ‰‹æŒ‡çŠ¶æ€æ£€æµ‹å‡½æ•°
    const isFingerUp = (fingerTip, fingerPip, fingerMcp) => {
        return landmarks[fingerTip].y < landmarks[fingerPip].y && 
               landmarks[fingerPip].y < landmarks[fingerMcp].y;
    };

    // æ‹‡æŒ‡çŠ¶æ€æ£€æµ‹ï¼ˆåŸºäºXè½´ä½ç½®ï¼‰
    const isThumbUp = landmarks[4].x > landmarks[3].x && landmarks[4].x > landmarks[2].x;
    const isThumbDown = landmarks[4].x < landmarks[3].x && landmarks[4].x < landmarks[2].x;
    
    // äº”æŒ‡çŠ¶æ€æ•°ç»„
    const fingersUp = [
        isThumbUp,                    // æ‹‡æŒ‡ï¼ˆç´¢å¼•0ï¼‰
        isFingerUp(8, 6, 5),         // é£ŸæŒ‡ï¼ˆç´¢å¼•1ï¼‰
        isFingerUp(12, 10, 9),       // ä¸­æŒ‡ï¼ˆç´¢å¼•2ï¼‰
        isFingerUp(16, 14, 13),      // æ— åæŒ‡ï¼ˆç´¢å¼•3ï¼‰
        isFingerUp(20, 18, 17)       // å°æŒ‡ï¼ˆç´¢å¼•4ï¼‰
    ];

    const upCount = fingersUp.filter(Boolean).length;

    // æ‰‹åŠ¿åˆ†ç±»é€»è¾‘
    if (upCount === 1 && fingersUp[1]) {
        return { 
            name: 'æ•°å­—1', 
            emoji: '1', 
            confidence: 90, 
            command: 'scrollToTop' 
        };
    } else if (fingersUp[0] && !fingersUp[1] && !fingersUp[2] && !fingersUp[3] && !fingersUp[4]) {
        return { 
            name: 'ç‚¹èµ', 
            emoji: 'èµ', 
            confidence: 87, 
            command: 'scrollUp' 
        };
    } else if (isThumbDown && !fingersUp[1] && !fingersUp[2] && !fingersUp[3] && !fingersUp[4]) {
        return { 
            name: 'ç‚¹è¸©', 
            emoji: 'è¸©', 
            confidence: 85, 
            command: 'scrollDown' 
        };
    } else {
        return { 
            name: 'æœªçŸ¥æ‰‹åŠ¿', 
            emoji: '?', 
            confidence: 60, 
            command: null 
        };
    }
}
```

**ç®—æ³•åŸç†è¯¦è§£ï¼š**

1. **å…³é”®ç‚¹æ˜ å°„**ï¼šMediaPipeæä¾›21ä¸ªæ‰‹éƒ¨å…³é”®ç‚¹
   - æ‹‡æŒ‡ï¼š0-4ï¼ˆè…•éƒ¨åˆ°æŒ‡å°–ï¼‰
   - é£ŸæŒ‡ï¼š5-8
   - ä¸­æŒ‡ï¼š9-12
   - æ— åæŒ‡ï¼š13-16
   - å°æŒ‡ï¼š17-20

2. **æ‰‹æŒ‡çŠ¶æ€åˆ¤æ–­**ï¼š
   - é€šè¿‡æ¯”è¾ƒå…³é”®ç‚¹Yåæ ‡åˆ¤æ–­æ‰‹æŒ‡æ˜¯å¦ä¼¸ç›´
   - æ‹‡æŒ‡ç‰¹æ®Šå¤„ç†ï¼ˆåŸºäºXåæ ‡ï¼Œå› ä¸ºæ‹‡æŒ‡è¿åŠ¨æ–¹å‘ä¸åŒï¼‰

3. **æ‰‹åŠ¿åˆ†ç±»ç­–ç•¥**ï¼š
   - åŸºäºä¼¸ç›´æ‰‹æŒ‡çš„æ•°é‡å’Œç»„åˆ
   - æ¯ä¸ªæ‰‹åŠ¿éƒ½æœ‰ç½®ä¿¡åº¦è¯„åˆ†
   - è¿”å›ç»“æ„åŒ–çš„æ‰‹åŠ¿ä¿¡æ¯

#### 3.7 å‘½ä»¤æ‰§è¡Œç³»ç»Ÿ

```javascript
executeGestureCommand(gesture) {
    const now = Date.now();
    
    // é˜²æŠ–æœºåˆ¶ï¼šé¿å…é¢‘ç¹è§¦å‘
    if (now - this.lastGestureTime < this.gestureDelay) {
        return;
    }

    if (!gesture.command) return;

    this.lastGestureTime = now;
    this.addDebugMessage(`æ‰§è¡Œæ‰‹åŠ¿å‘½ä»¤: ${gesture.name}`);

    switch (gesture.command) {
        case 'scrollUp':
            window.scrollBy({ top: -300, behavior: 'smooth' });
            this.showNotification('å‘ä¸Šæ»šåŠ¨', 'info');
            break;
        case 'scrollDown':
            window.scrollBy({ top: 300, behavior: 'smooth' });
            this.showNotification('å‘ä¸‹æ»šåŠ¨', 'info');
            break;
        case 'scrollToTop':
            window.scrollTo({ top: 0, behavior: 'smooth' });
            this.showNotification('è¿”å›é¡¶éƒ¨', 'info');
            break;
    }
}
```

**è®¾è®¡ç‰¹ç‚¹ï¼š**
- æ—¶é—´æˆ³é˜²æŠ–ï¼Œé¿å…é‡å¤æ‰§è¡Œ
- å¹³æ»‘æ»šåŠ¨åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- å³æ—¶åé¦ˆé€šçŸ¥ç³»ç»Ÿ

## é«˜çº§æ‰©å±•åŠŸèƒ½å®ç°

### 1. å¤šæ‰‹åŠ¿æ”¯æŒæ‰©å±•

```javascript
// æ‰©å±•æ‰‹åŠ¿è¯†åˆ«ç®—æ³•
recognizeGestureAdvanced(landmarks) {
    const fingersUp = this.getFingerStates(landmarks);
    const upCount = fingersUp.filter(Boolean).length;
    
    // åŸæœ‰æ‰‹åŠ¿ä¿æŒä¸å˜...
    
    // æ–°å¢æ‰‹åŠ¿
    if (upCount === 2 && fingersUp[1] && fingersUp[2]) {
        return { name: 'æ•°å­—2', emoji: '2', confidence: 88, command: 'refresh' };
    }
    
    if (upCount === 3 && fingersUp[1] && fingersUp[2] && fingersUp[3]) {
        return { name: 'æ•°å­—3', emoji: '3', confidence: 86, command: 'toggleFullscreen' };
    }
    
    if (upCount === 5) {
        return { name: 'å¼ å¼€æ‰‹', emoji: 'âœ‹', confidence: 92, command: 'showMenu' };
    }
    
    if (upCount === 0) {
        return { name: 'æ¡æ‹³', emoji: 'âœŠ', confidence: 89, command: 'hideMenu' };
    }
    
    // OKæ‰‹åŠ¿æ£€æµ‹ï¼ˆæ‹‡æŒ‡å’Œé£ŸæŒ‡å½¢æˆåœ†åœˆï¼‰
    if (this.isOKGesture(landmarks)) {
        return { name: 'OK', emoji: 'ğŸ‘Œ', confidence: 85, command: 'confirm' };
    }
    
    return { name: 'æœªçŸ¥æ‰‹åŠ¿', emoji: '?', confidence: 60, command: null };
}

// OKæ‰‹åŠ¿æ£€æµ‹ç®—æ³•
isOKGesture(landmarks) {
    const thumbTip = landmarks[4];
    const indexTip = landmarks[8];
    
    // è®¡ç®—æ‹‡æŒ‡å’Œé£ŸæŒ‡æŒ‡å°–è·ç¦»
    const distance = Math.sqrt(
        Math.pow(thumbTip.x - indexTip.x, 2) + 
        Math.pow(thumbTip.y - indexTip.y, 2)
    );
    
    // è·ç¦»å°äºé˜ˆå€¼ä¸”å…¶ä»–æ‰‹æŒ‡ä¼¸ç›´
    return distance < 0.05 && 
           landmarks[12].y < landmarks[10].y && // ä¸­æŒ‡ä¼¸ç›´
           landmarks[16].y < landmarks[14].y && // æ— åæŒ‡ä¼¸ç›´
           landmarks[20].y < landmarks[18].y;   // å°æŒ‡ä¼¸ç›´
}
```

### 2. é«˜çº§å‘½ä»¤ç³»ç»Ÿ

```javascript
// æ‰©å±•å‘½ä»¤æ‰§è¡Œå™¨
executeAdvancedCommand(gesture) {
    const now = Date.now();
    if (now - this.lastGestureTime < this.gestureDelay) return;
    if (!gesture.command) return;

    this.lastGestureTime = now;
    this.addDebugMessage(`æ‰§è¡Œé«˜çº§å‘½ä»¤: ${gesture.name}`);

    switch (gesture.command) {
        // åŸæœ‰å‘½ä»¤ä¿æŒä¸å˜...
        
        case 'refresh':
            this.showNotification('åˆ·æ–°é¡µé¢', 'info');
            setTimeout(() => location.reload(), 1000);
            break;
            
        case 'toggleFullscreen':
            if (document.fullscreenElement) {
                document.exitFullscreen();
                this.showNotification('é€€å‡ºå…¨å±', 'info');
            } else {
                document.documentElement.requestFullscreen();
                this.showNotification('è¿›å…¥å…¨å±', 'info');
            }
            break;
            
        case 'showMenu':
            this.toggleNavigationMenu(true);
            this.showNotification('æ˜¾ç¤ºèœå•', 'info');
            break;
            
        case 'hideMenu':
            this.toggleNavigationMenu(false);
            this.showNotification('éšè—èœå•', 'info');
            break;
            
        case 'confirm':
            this.executeConfirmAction();
            this.showNotification('ç¡®è®¤æ“ä½œ', 'success');
            break;
            
        case 'zoomIn':
            this.adjustZoom(1.1);
            this.showNotification('æ”¾å¤§é¡µé¢', 'info');
            break;
            
        case 'zoomOut':
            this.adjustZoom(0.9);
            this.showNotification('ç¼©å°é¡µé¢', 'info');
            break;
    }
}

// å¯¼èˆªèœå•æ§åˆ¶
toggleNavigationMenu(show) {
    const menu = document.querySelector('.navigation-menu') || this.createNavigationMenu();
    menu.style.display = show ? 'block' : 'none';
    menu.style.opacity = show ? '1' : '0';
}

// åˆ›å»ºåŠ¨æ€å¯¼èˆªèœå•
createNavigationMenu() {
    const menu = document.createElement('div');
    menu.className = 'navigation-menu';
    menu.innerHTML = `
        <div class="menu-item" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">è¿”å›é¡¶éƒ¨</div>
        <div class="menu-item" onclick="window.scrollTo({top: document.body.scrollHeight, behavior: 'smooth'})">åˆ°è¾¾åº•éƒ¨</div>
        <div class="menu-item" onclick="window.print()">æ‰“å°é¡µé¢</div>
        <div class="menu-item" onclick="navigator.share({title: document.title, url: location.href})">åˆ†äº«é¡µé¢</div>
    `;
    
    menu.style.cssText = `
        position: fixed;
        top: 50%;
        left: 20px;
        transform: translateY(-50%);
        background: rgba(0,0,0,0.8);
        color: white;
        padding: 20px;
        border-radius: 10px;
        z-index: 1001;
        display: none;
        opacity: 0;
        transition: opacity 0.3s ease;
    `;
    
    document.body.appendChild(menu);
    return menu;
}

// é¡µé¢ç¼©æ”¾æ§åˆ¶
adjustZoom(factor) {
    const currentZoom = parseFloat(document.body.style.zoom || '1');
    const newZoom = Math.max(0.5, Math.min(2, currentZoom * factor));
    document.body.style.zoom = newZoom;
}
```

### 3. æ™ºèƒ½æ‰‹åŠ¿å­¦ä¹ ç³»ç»Ÿ

```javascript
class GestureLearningSystem {
    constructor() {
        this.gestureHistory = [];
        this.customGestures = new Map();
        this.learningMode = false;
    }
    
    // å¼€å§‹å­¦ä¹ æ–°æ‰‹åŠ¿
    startLearning(gestureName) {
        this.learningMode = true;
        this.currentLearningGesture = gestureName;
        this.learningData = [];
        console.log(`å¼€å§‹å­¦ä¹ æ‰‹åŠ¿: ${gestureName}`);
    }
    
    // è®°å½•æ‰‹åŠ¿æ•°æ®
    recordGestureData(landmarks) {
        if (!this.learningMode) return;
        
        // æå–å…³é”®ç‰¹å¾
        const features = this.extractFeatures(landmarks);
        this.learningData.push(features);
        
        if (this.learningData.length >= 10) {
            this.completeGestureLearning();
        }
    }
    
    // æå–æ‰‹åŠ¿ç‰¹å¾
    extractFeatures(landmarks) {
        const features = [];
        
        // è®¡ç®—æ‰‹æŒ‡é—´è§’åº¦
        for (let i = 0; i < landmarks.length - 1; i++) {
            const angle = this.calculateAngle(landmarks[i], landmarks[i + 1]);
            features.push(angle);
        }
        
        // è®¡ç®—æ‰‹æŒä¸­å¿ƒ
        const palmCenter = this.calculatePalmCenter(landmarks);
        features.push(palmCenter.x, palmCenter.y);
        
        return features;
    }
    
    // å®Œæˆæ‰‹åŠ¿å­¦ä¹ 
    completeGestureLearning() {
        const avgFeatures = this.calculateAverageFeatures(this.learningData);
        this.customGestures.set(this.currentLearningGesture, avgFeatures);
        
        this.learningMode = false;
        console.log(`æ‰‹åŠ¿å­¦ä¹ å®Œæˆ: ${this.currentLearningGesture}`);
        
        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        this.saveCustomGestures();
    }
    
    // è¯†åˆ«è‡ªå®šä¹‰æ‰‹åŠ¿
    recognizeCustomGesture(landmarks) {
        const currentFeatures = this.extractFeatures(landmarks);
        let bestMatch = null;
        let bestSimilarity = 0;
        
        for (const [name, features] of this.customGestures) {
            const similarity = this.calculateSimilarity(currentFeatures, features);
            if (similarity > bestSimilarity && similarity > 0.8) {
                bestMatch = name;
                bestSimilarity = similarity;
            }
        }
        
        return bestMatch ? {
            name: bestMatch,
            confidence: Math.round(bestSimilarity * 100),
            isCustom: true
        } : null;
    }
}
```

### 4. æ€§èƒ½ä¼˜åŒ–ç³»ç»Ÿ

```javascript
class PerformanceOptimizer {
    constructor() {
        this.frameCount = 0;
        this.lastFPSUpdate = Date.now();
        this.currentFPS = 0;
        this.skipFrames = 0;
        this.maxSkipFrames = 2; // æœ€å¤§è·³å¸§æ•°
    }
    
    // è‡ªé€‚åº”å¸§ç‡æ§åˆ¶
    shouldProcessFrame() {
        this.frameCount++;
        
        // è®¡ç®—å½“å‰FPS
        const now = Date.now();
        if (now - this.lastFPSUpdate > 1000) {
            this.currentFPS = this.frameCount;
            this.frameCount = 0;
            this.lastFPSUpdate = now;
            
            // æ ¹æ®FPSè°ƒæ•´è·³å¸§ç­–ç•¥
            if (this.currentFPS < 15) {
                this.maxSkipFrames = 3; // ä½FPSæ—¶å¢åŠ è·³å¸§
            } else if (this.currentFPS > 25) {
                this.maxSkipFrames = 1; // é«˜FPSæ—¶å‡å°‘è·³å¸§
            }
        }
        
        // è·³å¸§é€»è¾‘
        if (this.skipFrames > 0) {
            this.skipFrames--;
            return false;
        }
        
        this.skipFrames = this.maxSkipFrames;
        return true;
    }
    
    // å†…å­˜ç®¡ç†
    cleanupMemory() {
        // æ¸…ç†Canvas
        if (this.canvasCtx) {
            this.canvasCtx.clearRect(0, 0, this.canvasElement.width, this.canvasElement.height);
        }
        
        // æ¸…ç†å†å²æ•°æ®
        if (this.gestureHistory && this.gestureHistory.length > 100) {
            this.gestureHistory = this.gestureHistory.slice(-50);
        }
    }
}
```

### 5. å¤šè¯­è¨€æ”¯æŒç³»ç»Ÿ

```javascript
class InternationalizationSystem {
    constructor() {
        this.currentLanguage = 'zh-CN';
        this.translations = {
            'zh-CN': {
                'thumbsUp': 'ç‚¹èµ',
                'thumbsDown': 'ç‚¹è¸©',
                'number1': 'æ•°å­—1',
                'cameraStarted': 'æ‘„åƒå¤´å·²å¯åŠ¨',
                'cameraError': 'æ‘„åƒå¤´å¯åŠ¨å¤±è´¥',
                'scrollUp': 'å‘ä¸Šæ»šåŠ¨',
                'scrollDown': 'å‘ä¸‹æ»šåŠ¨',
                'scrollToTop': 'è¿”å›é¡¶éƒ¨'
            },
            'en-US': {
                'thumbsUp': 'Thumbs Up',
                'thumbsDown': 'Thumbs Down',
                'number1': 'Number 1',
                'cameraStarted': 'Camera Started',
                'cameraError': 'Camera Error',
                'scrollUp': 'Scroll Up',
                'scrollDown': 'Scroll Down',
                'scrollToTop': 'Scroll to Top'
            }
        };
    }
    
    // è·å–ç¿»è¯‘æ–‡æœ¬
    t(key) {
        return this.translations[this.currentLanguage][key] || key;
    }
    
    // åˆ‡æ¢è¯­è¨€
    setLanguage(lang) {
        this.currentLanguage = lang;
        this.updateUI();
    }
    
    // æ›´æ–°UIæ–‡æœ¬
    updateUI() {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            element.textContent = this.t(key);
        });
    }
}
```

## éƒ¨ç½²å’Œä¼˜åŒ–å»ºè®®

### 1. ç”Ÿäº§ç¯å¢ƒé…ç½®

```javascript
// ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–é…ç½®
const PRODUCTION_CONFIG = {
    // MediaPipeé…ç½®
    mediapipe: {
        modelComplexity: 0,              // ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è½»é‡æ¨¡å‹
        minDetectionConfidence: 0.8,     // æé«˜æ£€æµ‹é˜ˆå€¼
        minTrackingConfidence: 0.6,      // æé«˜è·Ÿè¸ªé˜ˆå€¼
        maxNumHands: 1                   // é™åˆ¶å•æ‰‹æ£€æµ‹
    },
    
    // æ€§èƒ½é…ç½®
    performance: {
        targetFPS: 30,                   // ç›®æ ‡å¸§ç‡
        maxSkipFrames: 2,               // æœ€å¤§è·³å¸§æ•°
        memoryCleanupInterval: 30000,    // å†…å­˜æ¸…ç†é—´éš”ï¼ˆæ¯«ç§’ï¼‰
        debugMode: false                 // å…³é—­è°ƒè¯•æ¨¡å¼
    },
    
    // ç¼“å­˜é…ç½®
    cache: {
        gestureHistoryLimit: 50,         // æ‰‹åŠ¿å†å²è®°å½•é™åˆ¶
        modelCacheTime: 3600000         // æ¨¡å‹ç¼“å­˜æ—¶é—´ï¼ˆ1å°æ—¶ï¼‰
    }
};
```

### 2. CDNå’Œèµ„æºä¼˜åŒ–

```html
<!-- ä½¿ç”¨CDNåŠ é€Ÿ -->
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646424915/hands.js" as="script">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.3.1640029074/camera_utils.js" as="script">

<!-- èµ„æºé¢„åŠ è½½ -->
<link rel="prefetch" href="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646424915/hands_solution_packed_assets.data">
```

### 3. é”™è¯¯ç›‘æ§å’Œåˆ†æ

```javascript
class ErrorMonitoring {
    constructor() {
        this.errorLog = [];
        this.setupGlobalErrorHandler();
    }
    
    setupGlobalErrorHandler() {
        window.addEventListener('error', (event) => {
            this.logError({
                type: 'JavaScript Error',
                message: event.message,
                filename: event.filename,
                lineno: event.lineno,
                timestamp: new Date().toISOString()
            });
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            this.logError({
                type: 'Promise Rejection',
                message: event.reason,
                timestamp: new Date().toISOString()
            });
        });
    }
    
    logError(error) {
        this.errorLog.push(error);
        
        // å‘é€åˆ°åˆ†ææœåŠ¡ï¼ˆå¯é€‰ï¼‰
        if (typeof gtag !== 'undefined') {
            gtag('event', 'exception', {
                description: error.message,
                fatal: false
            });
        }
    }
}
```

## æ€»ç»“

è¿™ä¸ªæ‰‹åŠ¿æ§åˆ¶æ¼”ç¤ºé¡¹ç›®å±•ç¤ºäº†ç°ä»£WebæŠ€æœ¯ä¸AIæŠ€æœ¯ç»“åˆçš„å¼ºå¤§æ½œåŠ›ã€‚é€šè¿‡MediaPipeçš„å…ˆè¿›è®¡ç®—æœºè§†è§‰ç®—æ³•ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š

1. **å®æ—¶æ‰‹åŠ¿è¯†åˆ«**ï¼šåŸºäº21ä¸ªå…³é”®ç‚¹çš„é«˜ç²¾åº¦æ£€æµ‹
2. **æµç•…çš„ç”¨æˆ·äº¤äº’**ï¼š60FPSçš„å®æ—¶å“åº”å’Œå¹³æ»‘åŠ¨ç”»
3. **å¥å£®çš„é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸æ•è·å’Œç”¨æˆ·åé¦ˆ
4. **å¯æ‰©å±•çš„æ¶æ„**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½
5. **æ€§èƒ½ä¼˜åŒ–**ï¼šè‡ªé€‚åº”å¸§ç‡æ§åˆ¶å’Œå†…å­˜ç®¡ç†

è¯¥é¡¹ç›®ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯æ¼”ç¤ºï¼Œæ›´æ˜¯æœªæ¥äººæœºäº¤äº’å‘å±•æ–¹å‘çš„æ¢ç´¢ã€‚éšç€WebAssemblyã€WebGPUç­‰æŠ€æœ¯çš„å‘å±•ï¼ŒåŸºäºWebçš„AIåº”ç”¨å°†ä¼šæœ‰æ›´å¹¿é˜”çš„åº”ç”¨å‰æ™¯ã€‚

### æœªæ¥å‘å±•æ–¹å‘

1. **å¤šæ¨¡æ€äº¤äº’**ï¼šç»“åˆè¯­éŸ³è¯†åˆ«ã€çœ¼åŠ¨è¿½è¸ªç­‰æŠ€æœ¯
2. **3Dæ‰‹åŠ¿è¯†åˆ«**ï¼šæ”¯æŒæ›´å¤æ‚çš„ç©ºé—´æ‰‹åŠ¿
3. **ä¸ªæ€§åŒ–å­¦ä¹ **ï¼šåŸºäºç”¨æˆ·ä¹ æƒ¯çš„è‡ªé€‚åº”ä¼˜åŒ–
4. **è·¨è®¾å¤‡åŒæ­¥**ï¼šæ”¯æŒå¤šè®¾å¤‡é—´çš„æ‰‹åŠ¿æ§åˆ¶åŒæ­¥
5. **æ— éšœç¢æ”¯æŒ**ï¼šä¸ºæ®‹éšœç”¨æˆ·æä¾›æ›´å¥½çš„äº¤äº’ä½“éªŒ

è¿™ä¸ªé¡¹ç›®ä¸ºWebå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ‰‹åŠ¿æ§åˆ¶è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ç›´æ¥åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå­¦ä¹ ç°ä»£Web AIæŠ€æœ¯çš„ä¼˜ç§€æ¡ˆä¾‹ã€‚