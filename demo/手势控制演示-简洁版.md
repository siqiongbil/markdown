# 手势控制网页演示 - 简洁版

## 功能概述
基于MediaPipe的手势识别网页演示，支持通过手势控制页面滚动和导航。

## 核心功能
- **点赞手势**：向上滚动页面
- **点踩手势**：向下滚动页面  
- **数字1手势**：返回页面顶部

## 技术栈
- MediaPipe Hands API
- HTML5 Canvas
- WebRTC Camera API
- 原生JavaScript ES6+

## 核心代码结构

### HTML结构
```html
<!-- 手势控制面板 -->
<div class="gesture-panel" id="gesturePanel">
    <div class="video-container">
        <video id="inputVideo" autoplay muted playsinline></video>
        <canvas id="outputCanvas" class="canvas-overlay"></canvas>
    </div>
    <div class="gesture-status">
        <span class="current-gesture" id="currentGesture">手势</span>
        <div>
            <div class="gesture-name" id="gestureName">未启动</div>
            <div class="confidence" id="confidence">0%</div>
        </div>
    </div>
    <div class="controls">
        <button class="btn btn-primary" id="startBtn">启动摄像头</button>
        <button class="btn btn-secondary" id="stopBtn" disabled>停止</button>
    </div>
</div>
```

### JavaScript核心类
```javascript
class GestureController {
    constructor() {
        this.hands = null;
        this.camera = null;
        this.isRunning = false;
        this.lastGestureTime = 0;
        this.gestureDelay = 1000; // 防抖延迟
        
        this.initializeElements();
        this.checkLibraries();
        this.bindEvents();
    }

    // 初始化MediaPipe
    async initializeMediaPipe() {
        this.hands = new Hands({
            locateFile: (file) => {
                return `https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646424915/${file}`;
            }
        });

        this.hands.setOptions({
            maxNumHands: 1,
            modelComplexity: 1,
            minDetectionConfidence: 0.7,
            minTrackingConfidence: 0.5
        });

        this.hands.onResults((results) => this.onResults(results));
    }

    // 手势识别核心算法
    recognizeGesture(landmarks) {
        const isFingerUp = (fingerTip, fingerPip, fingerMcp) => {
            return landmarks[fingerTip].y < landmarks[fingerPip].y && 
                   landmarks[fingerPip].y < landmarks[fingerMcp].y;
        };

        const isThumbUp = landmarks[4].x > landmarks[3].x && landmarks[4].x > landmarks[2].x;
        const isThumbDown = landmarks[4].x < landmarks[3].x && landmarks[4].x < landmarks[2].x;
        
        const fingersUp = [
            isThumbUp,
            isFingerUp(8, 6, 5),   // 食指
            isFingerUp(12, 10, 9), // 中指
            isFingerUp(16, 14, 13),// 无名指
            isFingerUp(20, 18, 17) // 小指
        ];

        const upCount = fingersUp.filter(Boolean).length;

        // 手势判断
        if (upCount === 1 && fingersUp[1]) {
            return { name: '数字1', emoji: '1', confidence: 90, command: 'scrollToTop' };
        } else if (fingersUp[0] && !fingersUp[1] && !fingersUp[2] && !fingersUp[3] && !fingersUp[4]) {
            return { name: '点赞', emoji: '赞', confidence: 87, command: 'scrollUp' };
        } else if (isThumbDown && !fingersUp[1] && !fingersUp[2] && !fingersUp[3] && !fingersUp[4]) {
            return { name: '点踩', emoji: '踩', confidence: 85, command: 'scrollDown' };
        }
        return { name: '未知手势', emoji: '?', confidence: 60, command: null };
    }

    // 执行手势命令
    executeGestureCommand(gesture) {
        const now = Date.now();
        if (now - this.lastGestureTime < this.gestureDelay) return;
        if (!gesture.command) return;

        this.lastGestureTime = now;

        switch (gesture.command) {
            case 'scrollUp':
                window.scrollBy({ top: -300, behavior: 'smooth' });
                break;
            case 'scrollDown':
                window.scrollBy({ top: 300, behavior: 'smooth' });
                break;
            case 'scrollToTop':
                window.scrollTo({ top: 0, behavior: 'smooth' });
                break;
        }
    }
}
```

## 使用方法
1. 打开页面，点击"启动摄像头"
2. 允许浏览器访问摄像头权限
3. 将手放在摄像头前做出相应手势
4. 观察页面响应手势命令

## 扩展功能示例

### 添加更多手势
```javascript
// 在recognizeGesture方法中添加
if (upCount === 2 && fingersUp[1] && fingersUp[2]) {
    return { name: '数字2', emoji: '2', confidence: 88, command: 'refresh' };
}
if (upCount === 5) {
    return { name: '张开手', emoji: '✋', confidence: 92, command: 'fullscreen' };
}
```

### 添加对应的执行逻辑
```javascript
// 在executeGestureCommand方法中添加
case 'refresh':
    location.reload();
    break;
case 'fullscreen':
    if (document.fullscreenElement) {
        document.exitFullscreen();
    } else {
        document.documentElement.requestFullscreen();
    }
    break;
```

## 注意事项
- 需要HTTPS环境或本地环境才能访问摄像头
- 建议在光线充足的环境下使用
- 手势识别有1秒防抖延迟
- 支持Chrome、Firefox、Safari等现代浏览器